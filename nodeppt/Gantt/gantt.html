<!DOCTYPE html>
  <html lang="zh-CN">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>é¡¹ç›®ç”˜ç‰¹å›¾</title>

      <!-- å¼•å…¥ç”˜ç‰¹å›¾æ ·å¼ -->
      <link rel="stylesheet" href="./dhtmlxgantt.css">
      <style>
          /* è‡ªå®šä¹‰æ ·å¼ */
          html, body {
              height: 100%;
              margin: 0;
              padding: 0;
              font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
          }

          .gantt-container {
              width: 100%;
              height: 800px;
              margin: 20px auto;
              border: 1px solid #e1e4e8;
              border-radius: 6px;
              overflow: hidden;
          }

          .page-header {
              padding: 20px;
              background: #f6f8fa;
              border-bottom: 1px solid #e1e4e8;
          }

          .page-header h1 {
              margin: 0;
              color: #24292e;
          }

          .page-header p {
              margin: 10px 0 0;
              color: #586069;
          }
      </style>
  </head>
  <body>
      <div class="page-header">
          <h1>ğŸ“… é¡¹ç›®è¿›åº¦ç”˜ç‰¹å›¾</h1>
          <p>å®æ—¶æ˜¾ç¤ºé¡¹ç›®ä»»åŠ¡è¿›åº¦å’Œä¾èµ–å…³ç³»</p>
      </div>

      <div id="gantt_here" class="gantt-container"></div>

      <!-- å¼•å…¥ç”˜ç‰¹å›¾è„šæœ¬ -->
      <script src="./dhtmlxgantt.js"></script>
      <script>
          // é…ç½®ç”˜ç‰¹å›¾
          gantt.config.date_format = "%Y-%m-%d %H:%i:%s";

          // å¯é€‰ï¼šè®¾ç½®çš®è‚¤
          // gantt.setSkin("meadow"); // è‰åœ°é£æ ¼
          // gantt.setSkin("skyblue"); // å¤©ç©ºè“é£æ ¼
          // gantt.setSkin("material"); // Materialé£æ ¼

          // åˆå§‹åŒ–ç”˜ç‰¹å›¾
          gantt.init("gantt_here");

          // é‡è¦ï¼šå°† YOUR_SERVER_URL æ›¿æ¢ä¸ºä½ çš„åç«¯æœåŠ¡å™¨åœ°å€
          const backendUrl = "https://donghaixuan.duckdns.org:3001";

          // ä»è¿œç¨‹åç«¯åŠ è½½æ•°æ®
          gantt.load(`${backendUrl}/gantt/backend/data`);

          // åˆ›å»ºæ•°æ®å¤„ç†å™¨ï¼Œè‡ªåŠ¨å¤„ç†CRUDæ“ä½œ
          var dp = gantt.createDataProcessor({
              url: `${backendUrl}/gantt/backend/data`,
              mode: "REST",
              onError: function(event) {
                  console.error("APIé”™è¯¯:", event);
                  alert("æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æœåŠ¡å™¨çŠ¶æ€");
              }
          });

          // å¯é€‰ï¼šæ·»åŠ è‡ªå®šä¹‰äº‹ä»¶å¤„ç†
          gantt.attachEvent("onAfterTaskAdd", function(id, item) {
              console.log("ä»»åŠ¡å·²æ·»åŠ :", id, item);
          });

          gantt.attachEvent("onAfterTaskUpdate", function(id, item) {
              console.log("ä»»åŠ¡å·²æ›´æ–°:", id, item);
          });
      </script>
  </body>
  </html>